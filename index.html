<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday!</title>
    <style>
        /* --- GLOBAL VARIABLES & RESET --- */
        :root {
            --primary: #e91e63;
            --primary-light: #ff6b9d;
            --bg-gradient: linear-gradient(135deg, #ffeef8 0%, #ffe5f3 50%, #ffd6ed 100%);
            --dark-bg: linear-gradient(135deg, #1a0a1f 0%, #2d1b3d 50%, #1f0f29 100%);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: "Segoe UI", system-ui, sans-serif; }
        
        body {
            background: var(--bg-gradient);
            transition: background 1.5s ease;
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .fade-out { opacity: 0; pointer-events: none; }
        .fade-in { opacity: 1; pointer-events: all; }
        
        /* --- PAGE STRUCTURE --- */
        .page {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transform: translateX(100%);
            transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out, visibility 0.6s;
        }

        .page.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }

        .page.exit-left { transform: translateX(-100%); opacity: 0; }
        
        /* --- BACKGROUND HEARTS --- */
        .hearts-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .heart { position: absolute; bottom: -50px; font-size: 20px; color: rgba(233, 30, 99, 0.5); animation: floatUp linear forwards; }
        @keyframes floatUp { to { transform: translateY(-120vh) rotate(360deg); } }

        /* --- MUSIC PLAYER --- */
        .music-control {
            position: fixed; bottom: 20px; right: 20px; z-index: 1000;
            width: 50px; height: 50px; border-radius: 50%;
            background: rgba(255,255,255,0.8); backdrop-filter: blur(5px);
            border: none; font-size: 24px; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center;
        }
        .music-control.playing { animation: pulse 2s infinite; background: var(--primary); color: white; }

        /* --- PAGE 1: COUNTDOWN --- */
        .hero h1 { font-size: 2.5rem; color: #333; text-align: center; }
        .highlight { color: var(--primary); font-weight: bold; }
        
        .countdown-container { display: flex; gap: 15px; margin: 30px 0; perspective: 1000px; }
        .digit-box { display: flex; flex-direction: column; align-items: center; }
        .card {
            width: 70px; height: 80px; background: white; border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; font-weight: bold; color: var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        .card::after { content: ''; position: absolute; width: 100%; height: 1px; background: rgba(0,0,0,0.1); }
        .label { font-size: 0.8rem; text-transform: uppercase; margin-top: 5px; color: #666; }
        
        .btn-main {
            padding: 15px 40px; border-radius: 50px; border: none;
            background: linear-gradient(135deg, #e91e63, #ff6b9d);
            color: white; font-size: 1.2rem; font-weight: bold;
            cursor: pointer; margin-top: 20px;
            box-shadow: 0 10px 20px rgba(233, 30, 99, 0.3);
            transition: transform 0.2s;
        }
        .btn-main:disabled { opacity: 0.6; cursor: not-allowed; filter: grayscale(1); }
        .btn-main:active { transform: scale(0.95); }

        /* --- PAGE 2: CELEBRATION --- */
        .slide-container {
            background: rgba(255,255,255,0.9); padding: 40px; border-radius: 20px;
            text-align: center; max-width: 600px; width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            transition: opacity 0.5s, transform 0.5s;
        }
        .slide-icon { font-size: 4rem; margin-bottom: 20px; display: block; }
        .options { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
        .btn-opt { padding: 10px 30px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; }
        .btn-yes { background: var(--primary); }
        .btn-no { background: #9c27b0; }
        
        /* Celebration Dashboard */
        .celebration-dashboard { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            display: flex; flex-direction: column; align-items: center;
            z-index: 5;
        }
        .dashboard-controls { 
            margin-top: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 20; 
            background: rgba(255,255,255,0.8); padding: 15px; border-radius: 20px;
        }
        .btn-action { 
            padding: 12px 25px; border-radius: 50px; border: none; 
            color: white; font-weight: bold; cursor: pointer; min-width: 250px;
            transform: scale(1); transition: transform 0.2s;
        }
        .btn-action:hover { transform: scale(1.05); }
        .btn-lights { background: #ffd700; color: #333; }
        .btn-music { background: #e91e63; }
        .btn-decorate { background: #ff6b9d; }
        .btn-balloons { background: #9c27b0; }
        .btn-msg { background: #ff5722; animation: pulse 2s infinite; }

        /* Decorations (Pure CSS) */
        .decor-layer { position: absolute; width: 100%; pointer-events: none; transition: opacity 1s; opacity: 0; }
        .lights-string { top: 0; height: 50px; display: flex; justify-content: space-around; z-index: 10; }
        .bulb { width: 15px; height: 15px; border-radius: 50%; margin-top: 10px; background: #444; }
        .lights-on .bulb { animation: twinkle 1s infinite alternate; }
        .lights-on .bulb:nth-child(odd) { background: #ffeb3b; box-shadow: 0 0 15px #ffeb3b; }
        .lights-on .bulb:nth-child(even) { background: #03a9f4; box-shadow: 0 0 15px #03a9f4; animation-delay: 0.5s; }

        .bunting { top: 60px; display: flex; justify-content: center; gap: 5px; }
        .flag { 
            width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid; 
            animation: sway 3s ease-in-out infinite; transform-origin: top center;
        }
        .flag:nth-child(1n) { border-top-color: #ff4081; }
        .flag:nth-child(2n) { border-top-color: #ffeb3b; animation-delay: 0.2s; }
        .flag:nth-child(3n) { border-top-color: #00bcd4; animation-delay: 0.4s; }

        .cake-container { bottom: 50px; left: 50%; transform: translateX(-50%); position: absolute; }
        .cake { font-size: 100px; line-height: 1; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3)); }
        
        .balloons-container { bottom: -100px; width: 100%; display: flex; justify-content: center; gap: 40px; }
        .balloon-decor { font-size: 60px; animation: floatUpBalloon 5s ease-out forwards; }
        
        /* --- PAGE 3: MESSAGE --- */
        .curtain-stage {
            position: relative; width: 100%; max-width: 600px; height: 400px;
            overflow: hidden; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            background: white;
        }
        .curtain {
            position: absolute; top: 0; width: 50%; height: 100%;
            background: linear-gradient(90deg, #b71c1c, #d32f2f, #b71c1c);
            transition: transform 1.5s ease-in-out; z-index: 10;
        }
        .curtain.left { left: 0; transform-origin: top left; }
        .curtain.right { right: 0; transform-origin: top right; }
        .curtain-stage.open .curtain.left { transform: scaleX(0); }
        .curtain-stage.open .curtain.right { transform: scaleX(0); }
        
        .message-content {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            padding: 40px; overflow-y: auto; text-align: left;
            opacity: 0; transition: opacity 1s 0.5s;
        }
        .curtain-stage.open .message-content { opacity: 1; }
        .click-hint {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 20; background: white; padding: 10px 20px; border-radius: 20px;
            color: var(--primary); font-weight: bold; pointer-events: none;
            transition: opacity 0.3s;
        }

        /* --- CONFETTI --- */
        canvas#confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; }

        /* Animations */
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes twinkle { 0% { opacity: 0.5; } 100% { opacity: 1; } }
        @keyframes sway { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes floatUpBalloon { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-80vh); opacity: 0; } }

        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            .hero h1 { font-size: 1.8rem; }
            .card { width: 60px; height: 70px; font-size: 2rem; }
            .curtain-stage { height: 300px; }
        }
    </style>
</head>
<body>

    <audio id="bg-music" src="https://files.catbox.moe/ysiz00.mp3" loop></audio>
    <button class="music-control" id="music-btn">üîá</button>

    <div class="hearts-container" id="hearts-container"></div>
    <canvas id="confetti"></canvas>

    <div id="page-1" class="page active">
        <section class="hero">
            <h1 id="hero-title">Counting down to <span class="highlight">Anjali's</span> special day üéÇ</h1>
            <p style="text-align: center; color: #666;">A special surprise awaits...</p>
        </section>

        <div class="countdown-container">
            <div class="digit-box"><div class="card" id="h-card">00</div><span class="label">Hours</span></div>
            <div class="digit-box"><div class="card" id="m-card">00</div><span class="label">Mins</span></div>
            <div class="digit-box"><div class="card" id="s-card">00</div><span class="label">Secs</span></div>
        </div>

        <button id="start-btn" class="btn-main" disabled>üéÄ Let's Celebrate</button>
    </div>

    <div id="page-2" class="page">
        <div id="slides-wrapper" class="slide-container">
            <div id="slide-1">
                <span class="slide-icon">‚ú®</span>
                <h2>It's Your Special Day!</h2>
                <button class="btn-main" onclick="nextSlide(2)">Let's Go! üéâ</button>
            </div>
            <div id="slide-2" class="hidden">
                <span class="slide-icon">üéÅ</span>
                <h2>Do you want to see what I made?</h2>
                <div class="options">
                    <button class="btn-opt btn-yes" onclick="nextSlide(3)">Yes!</button>
                    <button class="btn-opt btn-no" onmouseover="moveButton(this)">No</button>
                </div>
            </div>
            <div id="slide-3" class="hidden">
                <span class="slide-icon">üëë</span>
                <h2>Have a look, Madam Jiüíó</h2>
                <button class="btn-main" onclick="showDashboard()">Open Dashboard</button>
            </div>
        </div>

        <div id="dashboard" class="celebration-dashboard hidden">
            <div class="decor-layer" id="decor-lights">
                <div class="lights-string"></div>
            </div>
            
            <div class="decor-layer" id="decor-bunting">
                <div class="bunting">
                    <div class="flag"></div><div class="flag"></div><div class="flag"></div>
                    <div class="flag"></div><div class="flag"></div><div class="flag"></div>
                    <div class="flag"></div><div class="flag"></div>
                </div>
            </div>

            <div class="decor-layer" id="decor-cake">
                <div class="cake-container"><div class="cake">üéÇ</div></div>
            </div>

            <div class="decor-layer" id="decor-balloons">
                <div class="balloons-container"></div>
            </div>

            <div class="dashboard-controls">
                <h2 style="margin: 0; color: #333; font-size: 1.2rem;">Let's Decorate!</h2>
                <button id="btn-lights" class="btn-action btn-lights" onclick="toggleLights()">üí° Turn On Lights</button>
                <button id="btn-music-play" class="btn-action btn-music hidden" onclick="playMusicSequence()">üéµ Play Music</button>
                <button id="btn-decorate" class="btn-action btn-decorate hidden" onclick="addDecorations()">üé® Decorate</button>
                <button id="btn-balloons" class="btn-action btn-balloons hidden" onclick="flyBalloons()">üéà Fly Balloons</button>
                <button id="btn-message" class="btn-action btn-msg hidden" onclick="navigateTo(3)">üíå Read Message</button>
            </div>
        </div>
    </div>

    <div id="page-3" class="page">
        <button class="btn-opt btn-yes" style="position: absolute; top: 20px; left: 20px;" onclick="navigateTo(2)">‚Üê Back</button>
        <h2 style="color: var(--primary); margin-bottom: 20px;">üíå A Message From My Heart üíó</h2>
        
        <div class="curtain-stage" id="curtain-stage" onclick="openCurtains()">
            <div class="curtain left"></div>
            <div class="curtain right"></div>
            <div class="click-hint" id="click-hint">‚ú® Click to Open ‚ú®</div>
            
            <div class="message-content">
                <p><strong>Dearest friend,</strong></p>
                <p>
                    Wish you a very very happy birthdayüéÇ.<br><br>
                    I wish that you always stay happy üíó.<br><br>
                    And your day always filled with lots of laughterüíó.<br><br>
                    Happy Birthday dear üíï <br>
                    <strong>‚Äî Your single piece- Vikash</strong>
                </p>
            </div>
        </div>
    </div>

    <script>
        /* ================= CONFIGURATION ================= */
        // CHANGE THIS DATE to the birthday! Format: YYYY-MM-DDTHH:MM:SS
        const targetDate = new Date("2026-01-07T12:10:00"); 
        const recipientName = "Anju";
        
        /* ================= GLOBAL STATE ================= */
        let birthdayReached = false;
        let currentPage = 1;

        /* ================= AUDIO ================= */
        const audio = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');
        let isPlaying = false;

        musicBtn.addEventListener('click', () => {
            if(isPlaying) {
                audio.pause();
                musicBtn.innerHTML = 'üîá';
                musicBtn.classList.remove('playing');
            } else {
                audio.play();
                musicBtn.innerHTML = 'üîä';
                musicBtn.classList.add('playing');
            }
            isPlaying = !isPlaying;
        });

        /* ================= NAVIGATION ================= */
        function navigateTo(pageId) {
            const current = document.querySelector('.page.active');
            const next = document.getElementById(`page-${pageId}`);

            if(current) {
                current.classList.add('exit-left');
                setTimeout(() => {
                    current.classList.remove('active', 'exit-left');
                    next.classList.add('active');
                }, 500); 
            } else {
                next.classList.add('active');
            }
            currentPage = pageId;
            window.scrollTo(0,0);
        }

        /* ================= PAGE 1: COUNTDOWN ================= */
        const startBtn = document.getElementById('start-btn');
        const heroTitle = document.getElementById('hero-title');

        function updateTimer() {
            if(birthdayReached) return;
            
            const now = new Date();
            const diff = targetDate - now;

            if (diff <= 0) {
                enableCelebration();
                return;
            }

            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);

            document.getElementById('h-card').innerText = String(h).padStart(2, '0');
            document.getElementById('m-card').innerText = String(m).padStart(2, '0');
            document.getElementById('s-card').innerText = String(s).padStart(2, '0');
        }

        function enableCelebration() {
            birthdayReached = true;
            document.getElementById('h-card').innerText = "00";
            document.getElementById('m-card').innerText = "00";
            document.getElementById('s-card').innerText = "00";
            
            heroTitle.innerHTML = `Happy Birthday <span class="highlight">${recipientName}</span> üéÇ`;
            startBtn.disabled = false;
            startBtn.innerText = "üéÅ Open Gift";
            startBtn.onclick = () => navigateTo(2);
            
            triggerConfetti();
        }

        setInterval(updateTimer, 1000);
        updateTimer(); 

        /* ================= PAGE 2: LOGIC ================= */
        function nextSlide(id) {
            document.querySelectorAll('.slide-container > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(`slide-${id}`).classList.remove('hidden');
        }

        function moveButton(btn) {
            const x = (Math.random() - 0.5) * 150;
            const y = (Math.random() - 0.5) * 150;
            btn.style.transform = `translate(${x}px, ${y}px)`;
        }

        function showDashboard() {
            document.getElementById('slides-wrapper').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            // Init lights
            const string = document.querySelector('.lights-string');
            for(let i=0; i<20; i++) {
                const bulb = document.createElement('div');
                bulb.className = 'bulb';
                string.appendChild(bulb);
            }
        }

        // Decor Button Logic
        function toggleLights() {
            document.getElementById('decor-lights').style.opacity = '1';
            document.querySelector('.lights-string').classList.add('lights-on');
            document.body.style.background = 'var(--dark-bg)'; // Dim room
            
            document.getElementById('btn-lights').classList.add('hidden');
            document.getElementById('btn-music-play').classList.remove('hidden');
        }

        function playMusicSequence() {
            if(!isPlaying) musicBtn.click(); // Turn on music
            document.getElementById('decor-cake').style.opacity = '1';
            
            document.getElementById('btn-music-play').classList.add('hidden');
            document.getElementById('btn-decorate').classList.remove('hidden');
        }

        function addDecorations() {
            document.getElementById('decor-bunting').style.opacity = '1';
            
            document.getElementById('btn-decorate').classList.add('hidden');
            document.getElementById('btn-balloons').classList.remove('hidden');
        }

        function flyBalloons() {
            const container = document.querySelector('.balloons-container');
            const emojis = ['üéà', '‚ú®', 'üéâ', 'üéà'];
            
            // Spawn balloons
            for(let i=0; i<15; i++) {
                const b = document.createElement('div');
                b.className = 'balloon-decor';
                b.innerText = emojis[i % emojis.length];
                b.style.animationDelay = `${Math.random()}s`;
                b.style.left = `${Math.random() * 20}px`;
                container.appendChild(b);
            }
            document.getElementById('decor-balloons').style.opacity = '1';
            triggerConfetti();

            document.getElementById('btn-balloons').classList.add('hidden');
            document.getElementById('btn-message').classList.remove('hidden');
        }

        /* ================= PAGE 3: CURTAINS ================= */
        function openCurtains() {
            const stage = document.getElementById('curtain-stage');
            const hint = document.getElementById('click-hint');
            
            if(!stage.classList.contains('open')) {
                stage.classList.add('open');
                hint.style.opacity = '0';
                triggerConfetti();
            }
        }

        /* ================= EFFECTS: HEARTS ================= */
        function spawnHeart() {
            const container = document.getElementById('hearts-container');
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerText = '‚ù§';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 8000);
        }
        setInterval(spawnHeart, 800);

        /* ================= EFFECTS: CONFETTI (Vanilla JS) ================= */
        const canvas = document.getElementById("confetti");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        const colors = ['#e91e63', '#00bcd4', '#ffeb3b', '#9c27b0', '#ff5722'];

        function Particle() {
            this.x = Math.random() * canvas.width;
            this.y = -20;
            this.vx = Math.random() * 4 - 2;
            this.vy = Math.random() * 4 + 2;
            this.color = colors[Math.floor(Math.random() * colors.length)];
            this.size = Math.random() * 8 + 4;
        }

        Particle.prototype.draw = function() {
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.size, this.size);
        }

        Particle.prototype.update = function() {
            this.x += this.vx;
            this.y += this.vy;
        }

        function triggerConfetti() {
            for(let i=0; i<100; i++) particles.push(new Particle());
            if(particles.length <= 100) animateConfetti();
        }

        function animateConfetti() {
            if(particles.length === 0) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for(let i=0; i<particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if(particles[i].y > canvas.height) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            requestAnimationFrame(animateConfetti);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
